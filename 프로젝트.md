# KB Healthcare - í”„ë¡œì íŠ¸ êµ¬ì¡°

## ğŸ“ í”„ë¡œì íŠ¸ ê°œìš”
Spring Boot ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ - í—¬ìŠ¤ì¼€ì–´ ì„œë¹„ìŠ¤
```
kb_healthcare_one/
â”œâ”€â”€ authserver/      # ì¸ì¦/ì¸ê°€ ì„œë²„
â”œâ”€â”€ common/          # ê³µí†µ ëª¨ë“ˆ
â””â”€â”€ record/          # ê±¸ìŒìˆ˜ ê¸°ë¡ ì„œë¹„ìŠ¤
```

---

## ğŸ” authserver
**ì—­í• :** íšŒì›ê°€ì…, ë¡œê·¸ì¸, í† í° ë°œê¸‰

### ì£¼ìš” ê¸°ëŠ¥
- íšŒì›ê°€ì… (POST /v1/user/join)
- ë¡œê·¸ì¸ (POST /v1/user/login)
- JWT Access Token ë°œê¸‰
- JWT Refresh Token ë°œê¸‰
- í† í° ì¬ë°œê¸‰ (POST /v1/user/refresh)

### ê¸°ìˆ  ìŠ¤íƒ
- JDK 17 
- Spring Boot 3.3.5
- Spring Security
- OAuth2 Authorization Server
- JWT (JSON Web Token)
- JPA/Hibernate
- MySQL
- Jasypt (ì•”í˜¸í™”)

### ë³´ì•ˆ ì„¤ì •
- OAuth2 Authorization Server (Order 1)
    - OAuth2 í‘œì¤€ ì—”ë“œí¬ì¸íŠ¸ (/oauth2/*)
    - OIDC ì§€ì›
- Default Security (Order 2)
    - REST API ë³´í˜¸
    - JWT ê¸°ë°˜ ì¸ì¦/ì¸ê°€
    - scope, roles ê²€ì¦

### JWT êµ¬ì¡°
```json
{
  "sub": "user@example.com",
  "scope": "read write",
  "roles": "ROLE_USER",
  "userId": 1,
  "name": "í™ê¸¸ë™",
  "nickName": "ê¸¸ë™ì´",
  "iss": "http://localhost:9000",
  "exp": 1770007485,
  "iat": 1770003885
}
```

---

## ğŸ“¦ common
**ì—­í• :** JPA Entity, Repository ë“± ê³µí†µ ëª¨ë“ˆ

### ì£¼ìš” ê¸°ëŠ¥
- JPA Entity ì •ì˜
- Repository ì¸í„°í˜ì´ìŠ¤
- DTO (Data Transfer Object)
- ê³µí†µ ìœ í‹¸ë¦¬í‹°
- ê³µí†µ ì„¤ì •

### í¬í•¨ ë‚´ì—­
- **Entity**
    - User (íšŒì›)
    - UserIdentifier (ì‚¬ìš©ì ì‹ë³„ì)
    - BaseDateTimeEntity (ìƒì„±/ìˆ˜ì • ì‹œê°„ ìë™ ê´€ë¦¬)

- **Repository**
    - UserRepository
    - UserIdentifierRepository

- **DTO**
    - ApiResponse (ê³µí†µ ì‘ë‹µ í˜•ì‹)

- **Utils**
    - Constant (ìƒìˆ˜ ê´€ë¦¬)
    - UserEnums (ì‚¬ìš©ì ê´€ë ¨ Enum)

### ê¸°ìˆ  ìŠ¤íƒ
- Spring Data JPA
- Hibernate
- MySQL Connector
- Lombok

### íŠ¹ì§•
- `bootJar` ë¹„í™œì„±í™” (ë¼ì´ë¸ŒëŸ¬ë¦¬ ëª¨ë“ˆ)
- ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©
- JPA Auditing ì§€ì› (@CreatedDate, @LastModifiedDate)

---

## ğŸš¶ record
**ì—­í• :** ê±¸ìŒìˆ˜ ê¸°ë¡ ì„œë¹„ìŠ¤

### ì£¼ìš” ê¸°ëŠ¥
- ê±¸ìŒìˆ˜ ê¸°ë¡
- ê±¸ìŒìˆ˜ ì¡°íšŒ

### ì˜ˆìƒ ì—”ë“œí¬ì¸íŠ¸
| Method | Endpoint | ì„¤ëª… | ì¸ì¦ |
|--------|----------|------|------|
| POST | /v1/record/steps | ê±¸ìŒìˆ˜ ê¸°ë¡ | âœ… |
| GET | /v1/record/steps/daily | ì¼ë³„ ê±¸ìŒìˆ˜ ì¡°íšŒ | âœ… |
| GET | /v1/record/steps/weekly | ì£¼ë³„ ê±¸ìŒìˆ˜ ì¡°íšŒ | âœ… |
| GET | /v1/record/steps/monthly | ì›”ë³„ ê±¸ìŒìˆ˜ ì¡°íšŒ | âœ… |
| GET | /v1/record/steps/stats | í†µê³„ ì¡°íšŒ | âœ… |

### ì˜ì¡´ ëª¨ë“ˆ
- common (Entity, Repository ê³µìœ )

### ê¸°ìˆ  ìŠ¤íƒ
- Spring Boot 3.3.5
- Spring Security (JWT ê²€ì¦)
- JPA/Hibernate
- MySQL

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
kb_healthcare_one/
â”œâ”€â”€ build.gradle                    # Root build ì„¤ì •
â”œâ”€â”€ settings.gradle                 # ëª¨ë“ˆ ì„¤ì •
â”‚
â”œâ”€â”€ authserver/
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/kb/healthcare/authserver/
â”‚   â”‚       â”œâ”€â”€ AuthserverApplication.java
â”‚   â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚   â””â”€â”€ SecurityConfig.java
â”‚   â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚   â””â”€â”€ AuthServerController.java
â”‚   â”‚       â”œâ”€â”€ service/
â”‚   â”‚       â”‚   â””â”€â”€ AuthServerApiService.java
â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚       â”‚   â”œâ”€â”€ request/
â”‚   â”‚       â”‚   â””â”€â”€ response/
â”‚   â”‚       â””â”€â”€ exception/
â”‚   â”‚           â”œâ”€â”€ GlobalException.java
â”‚   â”‚           â””â”€â”€ GlobalExceptionHandler.java
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â””â”€â”€ application.yml
â”‚   â””â”€â”€ build.gradle
â”‚
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ src/main/java/
â”‚   â”‚   â””â”€â”€ com/kb/healthcare/common/
â”‚   â”‚       â”œâ”€â”€ business/
â”‚   â”‚       â”‚   â”œâ”€â”€ user/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ domain/entity/
â”‚   â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚       â”‚   â”‚   â”‚   â””â”€â”€ UserIdentifier.java
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â”‚   â”‚       â”œâ”€â”€ UserRepository.java
â”‚   â”‚       â”‚   â”‚       â””â”€â”€ UserIdentifierRepository.java
â”‚   â”‚       â”‚   â””â”€â”€ base/
â”‚   â”‚       â”‚       â””â”€â”€ domain/entity/
â”‚   â”‚       â”‚           â””â”€â”€ BaseDateTimeEntity.java
â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚       â”‚   â””â”€â”€ response/
â”‚   â”‚       â”‚       â””â”€â”€ ApiResponse.java
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚           â”œâ”€â”€ Constant.java
â”‚   â”‚           â””â”€â”€ UserEnums.java
â”‚   â””â”€â”€ build.gradle
â”‚
â””â”€â”€ record/
    â”œâ”€â”€ src/main/java/
    â”‚   â””â”€â”€ com/kb/healthcare/record/
    â”‚       â”œâ”€â”€ RecordApplication.java
    â”‚       â”œâ”€â”€ config/
    â”‚       â”œâ”€â”€ controller/
    â”‚       â”œâ”€â”€ service/
    â”‚       â””â”€â”€ dto/
    â”œâ”€â”€ src/main/resources/
    â”‚   â””â”€â”€ application.yml
    â””â”€â”€ build.gradle
```
